<div class="row m-5">
  <div class="col-md-12 text-center">
    <h2 class="display-5">SEP10 Demo Client</h2>
    <p class="lead">validate your <a href="https://github.com/stellar/stellar-protocol/blob/master/ecosystem/sep-0010.md" target="_blank">Stellar SEP10</a> implementation</p>
  </div>
</div>
{{#parsley-form id="request-payment" class="user" action=(action "authenticate")}}
<div class="row">
  <div class="col-md-8">
    <div class="form-group">
      <label class="col-form-label-sm">Client account (public key)</label>
      {{input class="form-control-plaintext" value=publicKey readonly="readonly"}}
    </div>
    <ul class="nav nav-tabs" id="responseTab" role="tablist">
      <li class="nav-item">
        <a class="nav-link active" id="token-tab" data-toggle="tab" href="#token" role="tab" aria-controls="token" aria-selected="true">Token</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="signedChallenge-tab" data-toggle="tab" href="#signedChallenge" role="tab" aria-controls="signedChallenge" aria-selected="false">Signed challenge</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="challenge-tab" data-toggle="tab" href="#challenge" role="tab" aria-controls="challenge" aria-selected="false">Challenge</a>
      </li>
    </ul>
    <div class="tab-content" id="responseTabContent">
      <div class="tab-pane fade show active" id="token" role="tabpanel" aria-labelledby="token-tab">
        <div class="form-group">
          {{!-- <label for="txtToken">Token</label> --}}
          <Textarea
            @id="txtToken"
            class="form-control"
            @value={{lastRequest.token}}
            rows="13"
            readonly=true
            aria-describedby="tokenHelp"
          />
          <small id="tokenHelp" class="form-text text-muted">
          {{#if lastRequest.token}}
            <a target="_blank" href="https://jwt.io/?token={{lastRequest.token}}">
              View on jwt.io
            </a>
          {{/if}}
          </small>
        </div>
      </div>
      <div class="tab-pane fade" id="signedChallenge" role="tabpanel" aria-labelledby="signedChallenge-tab">
        <div class="form-group">
          {{!-- <label for="txtSignedChallenge">Signed challenge</label> --}}
          <Textarea
            @id="txtSignedChallenge"
            class="form-control"
            @value={{lastRequest.signedChallenge}}
            rows="13"
            readonly=true
            aria-describedby="signedChallengeHelp"
          />
          <small id="signedChallengeHelp" class="form-text text-muted">
          {{#if lastRequest.signedChallenge}}
            <a target="_blank" href="https://laboratory.stellar.org/#xdr-viewer?input={{lastRequest.signedChallengeEncoded}}">
              View on Stellar laboratory
            </a>
          {{/if}}
          </small>
        </div>
      </div>
      <div class="tab-pane fade" id="challenge" role="tabpanel" aria-labelledby="challenge-tab">
        <div class="form-group">
          {{!-- <label for="txtChallenge">Challenge</label> --}}
          <Textarea
          @id="txtChallenge"
          class="form-control"
          @value={{lastRequest.challenge}}
          rows="13"
          readonly=true
          aria-describedby="challengeHelp"
          />
          <small id="challengeHelp" class="form-text text-muted">
          {{#if lastRequest.challenge}}
            <a target="_blank" href="https://laboratory.stellar.org/#xdr-viewer?input={{lastRequest.challengeEncoded}}">
              View on Stellar laboratory
            </a>
          {{/if}}
          </small>
        </div>
      </div>
    </div>
  </div>
  <div class="col-md-4">
    <div class="form-group">
      <label for="secretKey" class="col-form-label-sm">Client account (secret)*</label>
      {{input id="secretKey" aria-describedby="secretKeyHelp" class="form-control" value=secretKey placeholder="SDE3QA...CUYLCS" required="required"}}
      <small id="secretKeyHelp" class="form-text text-muted">stellar account secret key</small>
    </div>

    <div class="form-group">
      <label class="col-form-label-sm">Home domain*</label>
      {{input
        class="form-control"
        value=homeDomain
        placeholder="myhomedomain.com"
        required=true
        pattern="(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]"
      }}
    </div>

    <div class="form-group">
      <label class="col-form-label-sm">Server auth endpoint (optional)</label>
      {{input type="url" class="form-control" value=authEndpoint placeholder="http://127.0.0.1:3000/auth or https://myhomedomain.com/auth"}}
    </div>

    <div class="form-group">
      <label class="col-form-label-sm">Server auth signing account (optional)</label>
      {{input class="form-control" value=authAccount placeholder="GCZF7C...SZ3AUH"}}
    </div>
    <hr>
    <button id="btn-request" type="submit" class="btn btn-outline-primary btn-lg btn-block text-uppercase">
      {{#if loading}}
        <div class="loader float-right"></div>
        authenticating
      {{else}}
        authenticate
      {{/if}}
    </button>
    {{#if error}}
    <div class="alert alert-danger mt-3" role="alert">
      {{error}}
    </div>
    {{/if}}
  </div>
</div>
{{/parsley-form}}
